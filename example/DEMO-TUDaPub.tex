\documentclass[
	ngerman,
	accentcolor=9c,% Farbe für Hervorhebungen auf Basis der Deklarationen in den Corporate Design Richtlinien
%	logofile=example-image, %Falls die Logo Dateien nicht vorliegen
	]{tudapub}
	
\usepackage[english, main=ngerman]{babel}
\usepackage[babel]{csquotes}

\usepackage{biblatex}
\bibliography{DEMO-TUDaBibliography}

%Formatierungen für Beispiele in diesem Dokument. Im Allgemeinen nicht notwendig!
\let\file\texttt
\let\code\texttt
\let\pck\textsf
\let\cls\textsf

\usepackage{hologo}

\begin{document}
	
	
\title{\LaTeX{} im Corporate Design der TU~Darmstadt}
\subtitle{Die Dokumentenklasse tudapub}
\author{Marei Peischl\thanks{pei\TeX{} \TeX{}nical Solutions}\and der \TeX-Löwe}

%\titleimage{
%	%Folgende Box kann selbstverständlich durch ein mit \includegraphics geladenes Bild ersetzt werden.
%	\color{black!30}\rule{\width}{\height}
%}


%Varianten der Infoboxen
\addTitleBox{Institutsbezeichnung bzw. Logo in 2/3 Größe, vgl. \code{addTitleBoxLogo}}
%\addTitleBoxLogo{example-image}
%\addTitleBoxLogo*{\includegraphics[width=.3\linewidth]{example-image}}


%Zusätzliche Metadaten für PDF/A. In diesem Fall notwendig, weil Titel ein Makro enthält.
\Metadata{
	author=Marei Peischl (peiTeX),
	title=LaTeX im Corporate Design der TU Darmstadt,
	subject=Basisdokumentation und Template zur Nutzung der tudapub-Dokumentenkasse,
	date=2019-04-29, 
	keywords=TU Darmstadt \sep Corporate Design \sep LaTeX
}

\maketitle

\begin{abstract}
	Dieses Dokument stellt ein Template und gleichzeitig die Verwendungsdokumentation zur Dokumentenklasse tudapub, einem Teil des TUDa-CI-Paketes dar.
	
	Noch befindet sich das Projekt in der Testphase. Sollten Sie Fragen, wünsche und Anregunden haben, bitten wir um eine entsprechende Mitteilung.
\end{abstract}

\begin{abstract}[english]
	Example for an additional abstract in English.
\end{abstract}



\tableofcontents

\section{Über diese Datei}
Die Datei \file{DEMO-TUDaPub.tex} beziehungsweise ihre Ausgabe \file{DEMO-TUDaPub.pdf} ist die Dokumentation der Dokumentenklasse \file{tudapub.sty}.

Sie ist Teil des TUDa-CI-Bundles und basiert in Teilen auf dem tuddesign-Paket von C.~v.~Loewenich und J.~Werner. 
	
In diesem Dokument werden die speziellen Optionen und Einstellungsmöglichkeiten erläutert.

\section{Verwendung}
Die Klasse kann wie für Dokumentenklassen üblich eingebunden werden
\begin{verbatim}
\documentclass[<Optionen>{tudapub}
\end{verbatim}
Im folgenden werden die möglichen Optionen beschrieben

\subsection{Klassenoptionen}

\begin{description}
	\item[class=<article|report|book>] Diese Option legt die Basisdokumentenklasse fest. Die Werte laden die entsprechende KOMA-Script-Klasse \cite{koma}. Der Wert \code{article} lädt somit die Klasse \code{scrartcl}.
	
	KOMA-Script ist eine Sammlung von Klassen und Paketen für \LaTeX, das neben den typografischen Anpassungen an den Europäischen Raum auch die Konfigurationsmöglichkeiten start erweitert.
	\item[color=<Farbe>] Wählt die Schmuckfarbe für die Nutzung in der Idenditätsleisten aus. Die Farbcodes finden sich in der Farbübersicht in den Corporate Design Richtlinien. Neben diesen Farben kann prinzipiell jede beliebige Farbe übergeben werden. Die Optionen \code{accentcolor}, \code{textaccentcolor} und \code{identbarcolor} werden anlog direkt an tudacolors übergeben. Auf diesem Weg können die Farben unabhngig voneinaner gesetzt werden.
	\item[marginpar] Schaltet die Randnotizspalte um. Voreinestellt ist \code{auto}. Dies bedeutet, dass die Randnotizspalte wie im Corporate Desing Handbuch über die fünfte Spalte läuft.  \marginpar{Beispiel für eine Randnotiz} 
	
	Randnotizen werden über den komafont-Mechanismus im Element \code{marginpar} gesetzt. Seine Voreinstellung entspricht
	\begin{verbatim}
	\setkomafont{marginpar}{\accentfont}
	\end{verbatim}
	Um zusätzlich farbige Randnotizen zu setzen, könnte dies geändert werden, über
	\begin{verbatim}
	\addtokomafont{marginpar}{\color{textaccentcolor}}
	\end{verbatim}
	\marginline{
		\includegraphics[width=\marginparwidth]{example-image}\\
		Flattersatz in der marginnline aus \KOMAScript
	}
	\item[twocolumn] Aktiviert den zweispaltigen Modus global. In diesem Fall werden jedoch aufgrund ihrer Natur zwei Randnotizspalten erzeugt. Eine Nutzung in Kombination mit \code{marginpar=auto} ist daher in den meisten Fällen fragwürdig. Falls der zweispaltige Modus lediglich lokal aktiviert wird, entfällt dieses Verhalten, allerdings werden dann Randnotizen deaktiviert. 
	\item[ruledheaders] Wählt den Stil der Überschriften aus. \code{ruledheaders=all} wählt den mit Linien eingerahmten Stil für alle bis zur \verb+\subsubsection+. Bei \code{chapter} beziehungsweise \code{section} ist dieser Stil entsprechend 
	beschränkt. False läft den Standard Stil aus KOMA-Script.
	\item[type] Als Typ stehen im moment \code{publication} und \code{thesis} zur Verfügung. Die besonderen Möglichkeiten imTyp thesis sind in der Datei DEMO-TUDaThesis.tex/.pdf geschildert.Voreingestellt ist \code{publication}.
	\item[headline] Die Kopfzeile verfügt über die im Corporate Design beschriebenen Layoutmöglichkeiten über den Wert \code{automark}. Da diese Lösung typografisch nicht sonderlich sinnvoll ist, ist es auch möglich diese abzuschalten. Voreingestellt ist ein Stil ohne Kolumnentitel.
	\item[colorback] Schaltet zwischen dem farbigen Block auf der Titelseite und weißem Hintergrund um.
\end{description}

\noindent Der Rest der Dokumentenklasse entspricht dem Standard von KOMA-Script, vgl. Abschnitt \ref{KOMA}.

\subsection{Die Titelseite}

Die Titelseite wird von tudapub automatisch generiert. Die Verwendung hierfür entspricht größtenteils der klassichen Methode unter Verwendung von \code{maketitle}.

Die \KOMAScript-Option \code{titlepage} erlaubt es üblicherweise zwischen Titelseiten und Titelkopf umzuschalten.
Diese Funktion wurde deaktiviert und erzeugt eine entsprechende Warnung. Die Corporate Design Vorgaben lassen die Erzeugung eines einzelnen Titelkopfes nicht zu. Der Wert \code{titlepage=firstiscover} wird erzwungen.


Die Makros wie \code{author}, \code{title}, \code{subtitle} und \code{date} entsprechen der normalen Verwendung. Für die Institutszuweisung kann ebenfalls wie gewohnt \code{thanks} verwendet werden.

Zusätzlich stehen die Makros \code{titleimage} und \code{addTitleBox} zur Verfügung um weitere Informationen bereit zu stellen.

\minisec{titleimage}
Das Makro \code{titleimage} akzeptiert beliebigen Inhalt. Dieser wird bündig mit der oberen Ecke im Hauptteil der Titelseite platziert.
Üblicherweise wird dieses Makro zur Platzierung einer Grafik genutzt:

\begin{verbatim}
\titleimage{\includegraphics[width=\width]{example-image}}
\end{verbatim}




Die Position des Logos ist schaltbar. Dies geschieht über die Dokumentenklassenoption \code{logo=head/body}.
\begin{description}
	\item[logo=head] Das Logo wird im Kopf direkt neben dem Titel platziert. Der Titel wird in der Breite reduziert. Der Hintergrund des Titels wird in der Farbe der Identitätsleiste eingefärbt. Zusätzliche Infoboxen (s.u.) werden ebenfalls im Kopf platziert.
	\item[logo=body] Das Logo samt der Infoboxen wird im Körper der Titelseite platziert. Sofern ein 
\end{description}




Zusätzlich stehen die Makros \code{titleimage} und \code{addTitleBox} zur Verfügung, um den unteren Teil der Titelseite zu füllen.

\begin{verbatim}
\titleimage{\includegraphics[height=\height]{titleimage}}
\addTitleBox{Institut 1}
\end{verbatim}
Die Institutsboxen werden mit vorgegebenem Abstand unter dem Logo platziert. Hier kann Text erscheinen oder auch ein Institutslogo. Der Hintergrund ist weiß.

Um die Institutsboxen für Logos zu verwenden, liefert \cls{tudapub} das Makro \code{\addTitleBoxLogo}. Als Argument akzeptiert es einen Bilddateipfad.

\begin{verbatim}
\addTitleBoxLogo{example-image}
\addTitleBoxLogo*{\includegraphics[width=\linewidth]{example-image}}
\end{verbatim}

\subsection{Strukturierungselemente}



\minisec{Die abstract-Umgebung}
Die \code{abstract}-Umgebung wird für \cls{tudapub} um eine Option für die Sprache erweitert. Somit ist es möglich mehrere Zusammenfassungen in einem Dokument zu nutzen.

\begin{verbatim}
\begin{abstract}
	Zusammenfassung entsprechend der Dokumentensprache. In diesem Fall Deutsch.
\end{abstract}

\begin{abstract}[english]
	Zusätzliche Zusammenfassung in englisher Sprache
\end{abstract}
\end{verbatim}

Für die Verwendung ist wichtig, dass alle im Dokument genutzten Sprachen geladen werden. Im Falle des Beispiels muss also sowohl \code{ngerman} als auch \code{english} an das \pck{babel}-Paket übergeben werden.


\subsection{PDF/A Konformität}
Die Klasse TUDaPub unterstützt den Standard PDF/A 1b. Der PDF/A-Modus ist automatisch aktiviert. die zugehörte Option kann jedoch über \code{pdfa=false} ausgeschaltet werden.
Nun wird zusätzlich eine \code{\textbackslash.xmpdata}-Datei generiert. Überlicherweise werden die Titelinformationen direkt übernommen.

Dies kann jedoch bei der Verwendung einiger Makros innerhalb der Felder zu Problemen führen. Beispielsweise enthält der Titel für dieses Dokument das Makro \code{\LaTeX}. Es können daher nur Textelemente übernommen werden. Ähnlich den Linkbezeichnungen über PDF-Lesezeichen.

Um dieses Problem zu umgehen stellt \cls{tudapub} hierfür das Makro \code{\textbackslash{}Metadata\{\}} zur Verfügung. Hier können sämtliche von \pck{pdfx} verarbeitbaren Variablen nach Schlüssel$=$Wert-Struktur gesetzt werden. Es ist zu beachten, dass dieses Makro nur dann funktioniert, wenn die \code{pdfa}-Ausgabe aktiviert ist. Ist dies nicht der Fall, so gibt \cls{tudapub} eine entsprechende Fehlermeldung zu diesem Widerspruch aus.
Zum Beispiel:
\begin{verbatim}
\Metadata{
	author=Marei Peischl (peiTeX),
	title=LaTeX im Corporate Design der TU Darmstadt,
}
\end{verbatim}
Das Feld \code{publisher} ist mit \enquote{TU Darmstadt} vorbelegt, kann aber überschrieben werden. 

Um mehrere Einträge zu Trennen, wird das Makro \code{\textbackslash{}sep} genutzt.
\begin{verbatim}
keywords={TU Darmstadt \sep Corporate Design \sep LaTeX}
\end{verbatim}
Wenn der Eintrag selbst Kommata enthalten könnte, dann ist eine Gruppierung um den Eintrag notwendig. Sonst wird der Text nach dem Komma als nächstes Keyword interpretiert.

\minisec{Möglich Probleme mit älteren Systemen:}

Bei älteren \TeX-Distributionen kann es vorkommen, dass die Farbprofile nicht vorinstalliert sind. In diesem Fall wird eine Fehlermeldung im folgenden Sinn erzeugt:
\begin{verbatim}
No color profile found to use for RGB screen colors
\end{verbatim}
Um diesen Fehler zu beheben können die notwendigen *.icc-Dateien unter \url{https://ctan.org/tex-archive/support/colorprofiles} heruntergeladen und entweder installiert oder im Projektordner mit abgelegt werden. Die einfachste Lösung bleibt jedoch das eigene \TeX-System zu aktualisieren.

Darüber hinaus werden bei \hologo{XeLaTeX} einige Features nicht unterstützt. In diesem Fall erzeugt \code{pdfa=false} ein kompilierbares Dokument, allerdings sollte für validierbare PDF/A-Dateien auf \hologo{LuaLaTeX} einer möglichst aktuellen Version umgestiegen werden.

\subsection{Zusätzliche Metadaten nach Wunsch der Universitätsbibliothek}
Es existiert ein Mechanismus um das Strukturierungsmodell IMRaD \cite{imrad} zu kennzeichnen.
Im Stil der einzelnen Teilbereiche können so, über Aufruf von 

\begin{verbatim}
\IMRADlabel{introduction}
\IMRADlabel{methods}
\IMRADlabel{results}
\IMRADlabel{discussion}
\end{verbatim}
werden entsprechende Labels generiert. Sie haben den Namen \code{IMRAD:<Schlüssel>}.




\section{Erweiterte Konfigurationsmöglichkeiten}


\subsection{Anpassungen, die von den Corporate Design Richtlinien abweichen}
\cls{tudapub} kann entgegen der Corpodate Design Richtlinien auch andere Schriftgrößen verarbeiten. Hierfür wird die \code{fontsize}-Option aus \KOMAScript{} genutzt (z.\,B. \code{fontsize=11pt}). Sofern keine spezielle Schriftgrößendatei für \TUDa-CI{} vorliegt, wird die mit \KOMAScript{} ausgelieferte Datei gewählt.

Beispiele für Abweichungen aus typografischen Gründen sind Beispielsweise auch in den Demo-Dateien für Abschlussarbeiten gezeigt.

\subsection{Frontmatter/Mainmatter/Backmatter}
Üblicherweise existieren die Makros \verb+\frontmatter+, \verb+\mainmatter+ und \verb+\backmatter+ lediglich bei der Basisklasse \cls{scrbook}.
Auf Wunsch wurden diese Makros auf bei \cls{scrartcl} und \cls{scrreprt} als Basis bereitgestellt.

Somit ist es möglich für den Vorspann auf römische Ziffern zu wechseln. Ab \verb+\mainmatter+ werden dann arabische Ziffern verwendet. 



\section{Standard-KOMA-Script}
\label{KOMA}
Da die Klasse bis auf ein paar erzwungene Einstellungen, die das Layout betreffen, vollständig \KOMAScript-kompatibel ist, ist für sämtliche Modifikationen ein Blick in die \KOMAScript-Dokumentation hilfreich. Für einen Großteil bietet \KOMAScript{} eine eigene Lösung, wodurch Ergänzungspakete oft hinfällig sind.

Beispiele für typische Modifikationen, die auch im Rahmen des Corporate Design zulässig sind:
\begin{itemize}
	\item Umstellung der Absatzkennzeichnungsmethode von Einzug auf Abstand (Klassenoption parskip)
	\item Elementnummerierung mit oder ohne Endpunkt
	\item Positionierung, Ausrichtung und Abstände bei captions.
\end{itemize}

\printbibliography


\section{Bekannte Inkompatibilitäten}

\subsection{\texorpdfstring{\hologo{XeLaTeX}}{XeLaTeX} und PDF/A}
Das Paket \pck{pdfx} über welches die PDF/A Kompatibilität erzeugt wird, hat nur einen begrenzten Support für \hologo{XeLaTeX}.
Es wird eine entsprechende Warnung erzeugt, allerdings kann es bei älteren XeLateX-Versionen passieren, dass \pck{pdfx} bereits Fehlermeldungen erzeugt. Diese werden vor der Überprüfung auf das Paketalter ausgegeben. Das Paket muss geladen worden sein, bevor die Überprüfung auf Alter möglich ist.


\end{document}
